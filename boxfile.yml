code.build:
  # the php engine provides the php runtime and associated executables
  engine: php
  config:
    # tells nanobox to use php 7.0
    runtime: php-7.0
    # enables php extensions
    extensions:
      # required by composer
      - phar
      - filter
      - json
      - hash
      - zip
      - dom

# creates a web component in sim and production environments
web.codeigniter:
  # starts PHP-FPM and Apache
  start:
    fpm: /data/sbin/php-fpm -y /data/etc/php/php-fpm.conf -c /data/etc/php/php.ini
    apache: /data/sbin/httpd -DNO_DETACH
  # pipes log output into your app's log stream
  log_watch:
    apache[access]: /data/var/log/apache/access.log
    apache[error]: /data/var/log/apache/error.log
    php[error]: /data/var/log/php/php_error.log
    php[fpm]: /data/var/log/php/php_fpm.log
